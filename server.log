🔍 Loading .env from project root directory
🔍 Environment check on startup:
🔍 Current working directory: /Users/priyas/Lyfe
🔍 .env file path: /Users/priyas/.env
🔍 OPENAI_API_KEY exists: true
🔍 OPENAI_API_KEY length: 164
🔍 USDA_API_KEY exists: true
🔍 USDA_API_KEY length: 40
🔍 PORT: 5002
🔍 NODE_ENV: development
(node:49623) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:49623) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
Server running on port 5002
Connected to MongoDB
Creating journal entry for user: new ObjectId('68a8821e49ac6b98d6168801')
Entry data: {
  title: 'Test Entry',
  content: 'This is a test journal entry about my day. I feel ...'
}
Starting Alfred analysis for entry: Test Entry
Error analyzing journal entry: TypeError: Cannot read properties of undefined (reading 'toString')
    at /Users/priyas/Lyfe/server/routes/journal.js:108:110
    at Proxy.findIndex (<anonymous>)
    at Immediate.<anonymous> (/Users/priyas/Lyfe/server/routes/journal.js:108:53)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
🔍 Auth middleware - decoded token: {
  userId: '68b8560d8a6fd27caf07e4e7',
  iat: 1756951022,
  exp: 1757555822
}
🔍 Auth middleware - decoded token: {
  userId: '68b8560d8a6fd27caf07e4e7',
  iat: 1756951022,
  exp: 1757555822
}
